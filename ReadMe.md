# CMSC 197 2nd Mini Project
Prepared by: Candyl John F. Faeldonea
BS Computer Science IV

### Problem 1

Tasked to create a `run_analysis.R` that will perform the following task:
- Merges the training and the test sets to create one data set.
- Extracts only the measurements on the mean and standard deviation for each measurement
- Uses descriptive activity names to name the activities in the dataset
- Appropriately labels the data set with descriptive variable names
- Create a second, independent tidy data set with the average of each variable for each activity and each subject.

### Libraries Required

Enabling `dplyr` to use several functions like `select()`, `%>%`, `gsub()`, etc.

### Data

Human Activity Recognition Using Smartphones data is to be utilized on this project, it can be found on the downloaded file `UCI_HAR_Dataset.zip`. Extracting the file into a `\specdata` folder is necessary.

### R_script steps
1. Assign each of the following data to corresponding variables
Read all the files in the dataset, and apply appropriate column names.
```R
features <- read.table('features.txt', col.names = c('Index_Feature','Feature'))
activity_labels <- read.table('activity_labels.txt', col.names= c('Index_Activity','Activity'))
subject_test <- read.table('./test/subject_test.txt', col.names = 'Subject')
X_test <- read.table('./test/X_test.txt', col.names = features$Feature)
y_test <- read.table('./test/y_test.txt', col.names ="ID")
subject_train <- read.table('./train/subject_train.txt', col.names = 'Subject')
X_train <- read.table('./train/X_train.txt',col.names = features$Feature,)
y_train <- read.table('./train/y_train.txt', col.names = "ID")
```

2. Merges the training and the test sets to create one data set
The variable X_data and y_data is created by merging x_train and x_test, and y_train and y_test using the cbind() function
```R
X_train_p = cbind(y_train, subject_train,X_train)
X_test_p = cbind(y_test, subject_test,X_test)

#rename the first column for readability
names(X_train_p)[1] <- 'Activity'
names(X_test_p)[1]<- 'Activity'

#Merging train and test sets
X_data <- rbind(X_train,X_test)
y_data <- rbind(y_train,y_test)
subject_data <- rbind(subject_train,subject_test)
```

The data_merged variable is created by merging subject_data, y_data and X_data using the cbind() function.
```R
data_merged <- cbind(subject_data, y_data,X_data )
```

3. Extracting only the measurements on the mean and standard deviation
We make a subset of `data_merged` in the form of `extracted` which only contains columns of subject, ID, and those who have mean and std in their column name. We will be utilizing `dplyr` functions here.
```R
extracted <- data_merged %>% select(Subject, ID, contains("mean"),contains("std"))
```

4. Uses descriptive activity names to name the activities in the dataset
In the `extracted` data, activities in 2nd column are written in their Index. With this, we will subsitute the index number of activities, with the descriptions in `activity_labels`.
```R
extracted$ID <- activity_labels[extracted$ID,2]
```

5. Appropriately labels the data set with descriptive variable names

We will be renaming the labels in the extracted columns with the following:
```R
names(extracted)[2] = "Activity"
names(extracted)<-gsub("^t", "Time domain signal:", names(extracted))
names(extracted)<-gsub("^f", "Frequency domain signal: ", names(extracted))
names(extracted)<-gsub("-", ", ", names(extracted))
names(extracted)<-gsub("mean\\(\\)", " mean value ", names(extracted))
names(extracted)<-gsub("std\\(\\)", " standart deviation ", names(extracted))
names(extracted)<-gsub("Acc", " acceleration", names(extracted))
names(extracted)<-gsub("AccJerk", " acceleration jerk", names(extracted))
names(extracted)<-gsub("GyroJerk", " angular velocity jerk", names(extracted))
names(extracted)<-gsub("Gyro", " angular velocity", names(extracted))
names(extracted)<-gsub("Mag", " magnitude", names(extracted))
names(extracted)<-gsub("tBody", "TimeBody", names(extracted))
names(extracted)<-gsub("BodyBody", "body", names(extracted))
names(extracted)<-gsub("angle", "Angle", names(extracted))
names(extracted)<-gsub("gravity", "Gravity", names(extracted))
names(extracted)<-gsub("..X", "in X direction", names(extracted))
names(extracted)<-gsub("..Y", "in Y direction", names(extracted))
names(extracted)<-gsub("..Z", "in Z direction", names(extracted))
```

6. Create a second, independent tidy data set with the average of each variable for each activity and each subject

`data_cleaned` is generated by grouping the data from the `extracted` which groups the activity by the Subject and Activity. It then list their `means` and summarized it all. 
```R
data_cleaned <- extracted %>% group_by(Subject, Activity)%>% summarize_all(list(mean))
```
7. We will export `data_cleaned` into the `tidy_data.txt` file located in the directory. This is for us to see a clearer version of the output.
```R
#save as txt file
write.table(data_cleaned,file = 'tidy_data.txt',row.names = F)
```